---
interface Props {
  title: string;
  image: string;
  design: string;        // Nombre visible del diseño
  slug: string;          // Slug de la prenda (ej: "remera-oversize")
  price: string;
  category: string;      // <- nuevo
  designSlug: string;    // <- nuevo
}

const { title, image, design, slug, price, category, designSlug } = Astro.props;
---

<div class="product-card group bg-white rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 overflow-hidden">
  <!-- Contenedor de imagen -->
  <div class="relative overflow-hidden">
    <a href={`/${category}/${designSlug}/${slug}`} class="block">
      <img
        src={image}
        alt={title}
        class="w-full h-64 md:h-80 object-cover transition-transform duration-700 group-hover:scale-110"
      />
      
      <!-- Overlay en hover -->
      <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300"></div>
      
      <!-- Icono de "Ver más" en hover -->
      <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
        <div class="bg-white/90 backdrop-blur-sm rounded-full p-4 shadow-lg">
          <svg class="w-8 h-8 text-gray-800" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
          </svg>
        </div>
      </div>
    </a>
  </div>
  
  <!-- Contenido -->
  <div class="p-4 md:p-6">
    <!-- Título y diseño -->
    <div class="mb-3">
      <h2 class="text-lg md:text-xl font-bold text-gray-900 mb-1 group-hover:text-pink-500 transition-colors duration-300">
        {title}
      </h2>
      <p class="text-sm text-gray-600 font-medium">
        {design}
      </p>
    </div>
    
    <!-- Precio y botón -->
    <div class="flex items-center justify-between gap-3">
      <div class="text-xl md:text-2xl font-bold text-gray-900 flex-shrink-0 min-w-0 precio-container">
        <span class="precio whitespace-nowrap inline-block" aria-label={price}>AR$0</span>
      </div>
      
      <a 
        href={`/${category}/${designSlug}/${slug}`} 
        class="bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white text-center py-2 px-4 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl group/btn text-sm md:text-base"
      >
        <span class="flex items-center gap-2">
          <span>Ver</span>
          <svg class="w-4 h-4 transition-transform duration-300 group-hover/btn:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </span>
      </a>
    </div>
  </div>
</div>

<script>
  import { getPrecios } from "@scripts/precios.ts";
  document.addEventListener("astro:page-load", getPrecios);
</script>

<style>
  .product-card {
    min-height: 420px;
  }
  
  @media (min-width: 768px) {
    .product-card {
      min-height: 460px;
    }
  }
  
  /* Asegurar que el precio se mantenga en una línea */
  .precio {
    white-space: nowrap !important;
    display: inline-block !important;
    word-break: keep-all !important;
    overflow-wrap: normal !important;
  }
  
  .precio-container {
    min-width: 80px;
    overflow: hidden;
  }
  
  /* Mejorar el layout en mobile */
  @media (max-width: 767px) {
    .product-card .flex.items-center.justify-between {
      flex-wrap: nowrap;
      align-items: center;
      gap: 8px;
    }
    
    .product-card .flex.items-center.justify-between > * {
      flex-shrink: 0;
    }
    
    /* Forzar que el precio se mantenga en una línea */
    .product-card .precio {
      white-space: nowrap !important;
      display: inline-block !important;
      word-break: keep-all !important;
      overflow-wrap: normal !important;
      hyphens: none !important;
    }
    
    .product-card .precio-container {
      min-width: 90px;
      max-width: 120px;
    }
  }
</style>
